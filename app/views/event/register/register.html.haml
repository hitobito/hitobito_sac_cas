-#  copyright (c) 2024, schweizer alpen-club. this file is part of
-#  hitobito_sac_cas and licensed under the affero general public license version 3
-#  or later. see the copying file at the top-level directory or at
-#  https://github.com/hitobito/hitobito_sac_cas.

- title t(".title.#{manager ? 'manager' : 'participant'}")

- unless self_service_managed_enabled?
  = render 'event/participations/step_wizard', step: 1

- return_url = FeatureGate.enabled?('people.people_managers') ? group_event_path(group, event) : new_group_event_participation_path(group, event)

= crud_form(entry,
            url: register_group_event_path(group, event),
            method: :put,
            cancel_url: register_group_event_path(group, event),
            buttons_bottom: true,
            buttons_top: false) do |f|
  = hidden_field_tag(:manager, manager)
  = hidden_field_tag(:return_url, return_url)

  - if manager
    = render 'manager_fields', f: f
  - else
    .row
      .col-lg
        = render 'event/participation_contact_datas/fields', f: f
      .col-lg
        = render 'event/participations/contact_data_aside'

  = f.honeypot(:verification)
